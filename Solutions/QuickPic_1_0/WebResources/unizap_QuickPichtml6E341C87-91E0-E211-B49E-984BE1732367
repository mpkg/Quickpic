<!DOCTYPE html>
<html>
<head>
    <title>Quick Picture </title>
    <script src="ClientGlobalContext.js.aspx" type="text/javascript"></script>
    <script src="unizap_jquery1.4.1.min.js" type="text/javascript"></script>
    <script src="unizap_json2.js" type="text/javascript"></script>
    <script src="unizap_QuickPic.js" type="text/javascript"></script>
</head>
<body>
    <div id="divQuickPic" align="center">
        <div id="divImage" style="z-index: -1">
            <img id="imgPreview" alt="Add a Quick Pic" src="" />
        </div>
        <div id="divFileSelect">
            <label style="font-weight: bold">
                Select a Photo:</label><input name="iptPic" id="element_photo" onchange="SetPicture(this.files)"
                    type="file" accept="image/gif,image/jpeg,image/png" />
        </div>
    </div>
    <script type="text/javascript">
        jQuery.fn.center = function () {
            this.css("position", "absolute");
            this.css("top", (($(window).height() - this.outerHeight()) / 2) + $(window).scrollTop() + "px");
            this.css("left", (($(window).width() - this.outerWidth()) / 2) + $(window).scrollLeft() + "px");
            return this;
        }
        $(window).resize(function () {
            location.reload();
        });
        ConfigureAjaxLoading('Processing Image...Please do not close the window!');
        if (XrmObject.Page.ui.getFormType() != 2) {
            $('#divQuickPic').hide();
        }
        else {
            LoadImage();
            $('#divImage').css('position', 'fixed');
            $('#divImage').css('top', '0px');
            $('#divFileSelect').css('position', 'relative');
            $('#divFileSelect').css('top', (height - 0.45 * height) + 'px');
        }
    </script>
</body>
</html>
